# ZENGTO Web Acceptance Test Plan (M0-M1)

## 1. 文档目的

定义 ZENGTO Web 从功能、体验、性能、可靠性到可观测性的验收标准，确保版本可上线。

## 2. 验收范围

- M0：Coming Soon + Waitlist + 基础埋点
- M1：分析提交、状态流、结果展示、历史记录、设置

## 3. 测试环境

- `local`: 开发调试
- `staging`: 预发验收（必须）
- `prod`: 灰度上线后抽检

浏览器矩阵（最低）：

- Chrome 最新 2 个大版本
- Safari 最新 2 个大版本
- Edge 最新 2 个大版本

设备矩阵：

- Desktop：1920x1080 / 1440x900
- Mobile：390x844（iPhone）/ 412x915（Android）

## 4. 验收门槛（Go / No-Go）

- P0 场景通过率 100%
- P1 场景通过率 >= 95%
- 阻断级缺陷（Sev-1）为 0
- 关键埋点缺失为 0

## 5. 功能验收用例（M0）

## TC-M0-001 页面可访问

- 前置：访问 `/`
- 步骤：页面加载
- 预期：左导航、输入框、`COMING SOON`、CTA 均可见

## TC-M0-002 Waitlist 正常提交

- 前置：打开 waitlist 表单
- 步骤：输入有效邮箱并提交
- 预期：返回成功提示；事件 `waitlist_submit` 上报

## TC-M0-003 Waitlist 重复提交

- 前置：同邮箱已提交
- 步骤：再次提交同邮箱
- 预期：提示已在名单中；不崩溃

## TC-M0-004 输入框可编辑与快捷提交

- 步骤：输入文本，按 `Cmd/Ctrl+Enter`
- 预期：触发提交（若 M0 未开放分析，进入提示流程）

## 6. 功能验收用例（M1）

## TC-M1-001 新建分析任务

- 前置：在 `/app/analysis/new`
- 步骤：输入合法 prompt，点击提交
- 预期：返回 `job_id`，状态变为 `queued/processing`

## TC-M1-002 状态流展示

- 步骤：观察进度条
- 预期：按顺序显示：解析 -> 范围 -> 求解 -> 输出

## TC-M1-003 成功结果渲染

- 前置：任务成功
- 预期：显示推荐动作、理由摘要、至少一个图表

## TC-M1-004 失败重试

- 前置：任务返回 `failed_retryable`
- 步骤：点击重试
- 预期：新一轮状态流开始，`retry_count` +1

## TC-M1-005 历史列表

- 步骤：打开 `/app/history`
- 预期：显示最近 N 条记录；点击可进入详情

## TC-M1-006 设置更新

- 步骤：修改输出语言/解释深度
- 预期：保存成功并影响后续任务

## TC-M1-007 ZEN Chat 连续对话

- 前置：进入 `/app/chat`
- 步骤：发送问题，再基于回复追问一条
- 预期：两轮消息都可返回，聊天历史可见

## TC-M1-008 ZEN Chat 会话持久化

- 步骤：发送至少 2 条消息后刷新页面
- 预期：历史会话仍可恢复显示

## 7. 异常与边界用例

- 空输入提交 -> 按钮禁用
- 超长输入（>2000） -> 明确提示
- 网络中断 -> 可重试提示
- 接口 429 -> 限流提示 + 冷却
- 404 job_id -> 返回历史列表入口

## 8. 非功能测试

## 8.1 性能

- 首屏可交互 <= 3s（桌面标准网络）
- 提交后 300ms 内给到反馈
- P95 分析完成时长 <= 15s（M1 目标）

## 8.2 可用性

- 不出现“无响应”状态
- 错误提示可理解并可继续操作

## 8.3 可访问性

- 键盘可完成：导航、输入、提交、结果复制
- 对比度符合 WCAG AA
- loading 文案可被辅助技术读取

## 9. 埋点验收

P0 事件必须命中：

- `page_view_home`
- `waitlist_click`
- `waitlist_submit`
- `submit_analysis`（M1）
- `analysis_success` / `analysis_failed`（M1）
- `zen_chat_submit` / `zen_chat_response`（M1）

校验方式：

- 本地调试日志 + 数据平台实时看板双校验
- 事件字段完整率检查（必填字段不为空）

## 10. 回归测试清单

每次发版前执行：

- 首页访问
- Waitlist 提交
- 新建任务
- 状态流
- 结果页
- 历史页
- 设置页
- 核心埋点

## 11. 缺陷分级

- Sev-1：核心流程阻断（无法提交/无法查看结果）
- Sev-2：主要功能受损但可绕过
- Sev-3：体验问题或视觉偏差
- Sev-4：文案/低风险问题

## 12. 验收产出

上线前必须输出：

- 验收报告（通过率、缺陷列表）
- 性能报告（首屏、时延）
- 埋点核对报告
- 发布建议（可上线/需延期）
