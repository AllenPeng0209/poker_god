# ZENGTO Web Test & Quality Plan（对标版）

## 1. 文档目的

定义对标版测试策略、验收标准、质量门禁与发布前检查，确保复杂模块可稳定上线。

## 2. 质量目标

- 核心学习闭环可用性：P0 场景通过率 100%。
- 关键接口稳定性：错误率 < 1%。
- AI 教练可解释性：输出协议完整率 100%。
- 性能目标：关键页面与接口满足 P95 门槛。

## 3. 测试分层

- 单元测试：领域逻辑、评分算法、解析器。
- 合同测试：前后端 API 与 schema 一致性。
- 集成测试：跨服务流程（Analyze -> Reports -> Coach）。
- 端到端测试：用户真实旅程。
- 非功能测试：性能、安全、可观测性。

## 4. 验收范围（M1-M3）

- M1：Study + Practice + Analyze + AI Coach。
- M2：Solver + Reports。
- M3：Arena + Table Companion 回流。

## 5. 关键功能用例

## 5.1 Study

- 打开节点并查看策略频率。
- 切换过滤器不丢失上下文。
- 一键生成 Drill 成功。

## 5.2 Practice

- 单次训练会话可完成并给出评分。
- 错题自动进入错题本。
- 多模式切换保持正确计分。

## 5.3 Analyze

- 批量上传 HH 并完成解析。
- EV loss 排序正确。
- 手牌回跳 Study/Practice 正常。

## 5.4 Reports

- 统计指标按影响分排序。
- 小样本正确标记低置信度。
- 点击指标可回看手牌。

## 5.5 Solver

- 任务提交、排队、完成、取消流程完整。
- Nodelock 前后结果可对比。
- credits 扣费与退款正确。

## 5.6 AI Coach

- 各模块都可打开右侧面板并提问。
- 输出必须含：结论/依据/行动/风险/置信度。
- 动作类操作（创建 Drill/Plan）可闭环。

## 6. AI 专项评测

## 6.1 准确性评测

- 基准数据集：覆盖 preflop/postflop 主流场景。
- 评估项：建议动作一致率、EV 损失差值。

## 6.2 解释质量评测

- 检查是否引用上下文证据。
- 检查是否包含风险提示。

## 6.3 安全评测

- Prompt 注入绕过。
- 越权数据访问。
- 敏感数据泄露。

## 7. 性能测试

## 7.1 Web 与 API

- 首页、Study、Analyze、Reports 页面 P95。
- API 并发压测：RPS、错误率、时延。

## 7.2 队列与 Worker

- 峰值任务堆积测试。
- Worker 故障重试与恢复。

## 7.3 目标阈值（建议）

- Study 节点查询 P95 < 300ms。
- Coach 首 token P95 < 2s。
- Analyze 单批（1k 手）首批结果 P95 < 120s。

## 8. 安全测试

- 身份鉴权与会话过期。
- RBAC 越权校验。
- 输入验证与 SQL/NoSQL 注入防护。
- 上传文件类型与大小限制。

## 9. 可观测性验收

- 每个核心 API 有 request_id。
- 每个长任务有事件日志。
- 每个关键漏斗事件有埋点。

## 10. 回归策略

- 每次发版执行 Smoke 套件。
- 每周执行全量回归。
- 大版本前执行性能 + 安全专项。

## 11. 缺陷分级

- Sev-1：核心链路阻断。
- Sev-2：主要功能受损可绕过。
- Sev-3：体验问题。
- Sev-4：文案或低风险问题。

## 12. 发布门禁（Go/No-Go）

- Sev-1 必须为 0。
- P0 用例通过率 100%。
- 关键埋点缺失为 0。
- 回滚预案已演练。

## 13. 测试产出

- 测试报告（通过率、缺陷分布）。
- 性能报告（P50/P95/P99）。
- AI 评测报告（准确率、幻觉率、安全项）。
- 发布建议（上线/延期）。

